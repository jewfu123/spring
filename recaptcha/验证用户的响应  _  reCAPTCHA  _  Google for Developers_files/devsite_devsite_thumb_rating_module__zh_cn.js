(function(_ds){var window=this;var hga=function(a){var b=a.position;const c=a.Yx;a=a.Zx;b='<div class="devsite-thumb-rating" role="form" aria-labelledby="devsite-thumb-label-'+_ds.X(b)+'" tabindex="0"><div class="devsite-thumb-label" id="devsite-thumb-label-'+_ds.X(b)+'">';b=b+"\u8be5\u5185\u5bb9\u5bf9\u60a8\u6709\u5e2e\u52a9\u5417\uff1f"+('</div><div class="devsite-thumbs">'+q8(a.label,a.Vl,a.type)+q8(c.label,c.Vl,c.type)+"</div></div>");return(0,_ds.R)(b)},q8=function(a,b,c){let d;"thumb-down-filled"==c?d=(0,_ds.R)('<path d="M3,17h6.31l-0.95,4.57l-0.03,0.32c0,0.41,0.17,0.79,0.44,1.06L9.83,24c0,0,7.09-6.85,7.17-7V4H6C5.17,4,4.46,4.5,4.16,5.22 l-3.02,7.05C1.05,12.5,1,12.74,1,13v2C1,16.1,1.9,17,3,17z"></path><path d="M19,17h4V4h-4V17L19,17z"></path>'):
"thumb-down-outline"==c?d=(0,_ds.R)('<path d="M3,17h6.31l-0.95,4.57l-0.03,0.32c0,0.41,0.17,0.79,0.44,1.06L9.83,24c0,0,7.09-6.85,7.17-7h5V4H6 C5.17,4,4.46,4.5,4.16,5.22l-3.02,7.05C1.05,12.5,1,12.74,1,13v2C1,16.1,1.9,17,3,17z M17,6h3v9h-3V6z M3,13l3-7h9v10l-4.34,4.34 L12,15H3V13z"></path>'):"thumb-up-filled"==c?d=(0,_ds.R)('<path d="M21,7h-6.31l0.95-4.57l0.03-0.32c0-0.41-0.17-0.79-0.44-1.06L14.17,0c0,0-7.09,6.85-7.17,7v13h11c0.83,0,1.54-0.5,1.84-1.22 l3.02-7.05C22.95,11.5,23,11.26,23,11V9C23,7.9,22.1,7,21,7z"></path><path d="M5,7H1v13h4V7L5,7z"></path>'):
"thumb-up-outline"==c?d=(0,_ds.R)('<path d="M21,7h-6.31l0.95-4.57l0.03-0.32c0-0.41-0.17-0.79-0.44-1.06L14.17,0c0,0-7.09,6.85-7.17,7H2v13h16 c0.83,0,1.54-0.5,1.84-1.22l3.02-7.05C22.95,11.5,23,11.26,23,11V9C23,7.9,22.1,7,21,7z M7,18H4V9h3V18z M21,11l-3,7H9V8l4.34-4.34 L12,9h9V11z"></path>'):d="";return(0,_ds.R)('<button class="devsite-thumb '+_ds.X(b)+'" data-title="'+_ds.X(a)+'" aria-label="'+_ds.X(a)+'"><svg class="devsite-thumb-icon" viewBox="0 0 24 24" aria-hidden="true">'+d+"</svg></button>")},
iga=function(a){const b=a.Md;a='<devsite-dialog class="devsite-thumb-rating-dialog" id="'+_ds.X(a.jm)+'"><div class="devsite-dialog-contents"><h3 class="no-link" tabindex="-1">';a+='\u63d0\u4ea4\u53cd\u9988\u7684\u539f\u56e0\u662f\u4ec0\u4e48\uff1f</h3><form class="devsite-thumb-rating-categories">';const c=b.length;for(let d=0;d<c;d++){const e=b[d];a+='<div class="devsite-thumb-rating-category"><input type="radio" name="'+_ds.X(e.type)+'" id="'+_ds.X(e.id)+'"><label for="'+_ds.X(e.id)+'">'+_ds.S(e.label)+
"</label></div>"}return(0,_ds.R)(a+'</form></div><div class="devsite-dialog-buttons"><button type="submit" class="button button-primary devsite-thumb-rating-submit" disabled>\u63d0\u4ea4</button><button type="button" class="button devsite-dialog-close">\u53d6\u6d88</button></div></devsite-dialog>')},jga=function(a){const b=a.isSignedIn;a=a.xu;let c;c='<devsite-dialog class="devsite-thumb-rating-dialog" id="devsite-thumb-thank-you-dialog"><div class="devsite-dialog-contents"><h3 class="no-link">\u611f\u8c22\u60a8\u7684\u53cd\u9988\u3002</h3>';
b?a&&(c+='<p class="create-profile-prompt">\u4f7f\u7528 Google \u5f00\u53d1\u8005\u8d44\u6599\u4fdd\u5b58\u60a8\u7ecf\u5e38\u8bbf\u95ee\u7684\u9875\u9762\u3002</p>'):c+='<p class="sign-in-prompt">\u767b\u5f55\u540e\u65b9\u53ef\u5c06\u7ecf\u5e38\u8bbf\u95ee\u7684\u9875\u9762\u4fdd\u5b58\u81f3 Google \u5f00\u53d1\u8005\u8d44\u6599\u3002</p>';c+='</div><div class="devsite-dialog-buttons">';return(0,_ds.R)((b?a?c+'<button type="button" class="button button-primary create-profile">\u521b\u5efa\u4e2a\u4eba\u8d44\u6599':
c+'<button type="button" class="button button-primary devsite-dialog-close">\u5173\u95ed':c+'<button class="button button-primary sign-in-button">\u767b\u5f55')+"</button></div></devsite-dialog>")},kga=function(){return(0,_ds.R)('<svg class="material-icons devsite-feedback-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17l-.59.59-.58.58V4h16v12zm-9-4h2v2h-2zm0-6h2v4h-2z"></path></svg>')},lga=function(a){var b=
a.Tb;a=a.Kb;let c;c='<devsite-dialog class="devsite-thumb-rating-dialog" id="devsite-thumb-create-profile-dialog"><div class="create-profile-spinner"><devsite-spinner size="48"></devsite-spinner></div><div class="devsite-dialog-contents"><h3 class="no-link">\u521b\u5efa Google \u5f00\u53d1\u8005\u8d44\u6599</h3>';a?(c+='<p>\u60a8\u662f\u5426\u613f\u610f\u63a5\u6536 Google \u5f00\u53d1\u8005\u8d44\u6599\u53d1\u9001\u7684\u5173\u4e8e\u5f00\u53d1\u8005\u6d3b\u52a8\u3001\u65b0\u529f\u80fd\u548c\u65b0\u5185\u5bb9\u7684\u7535\u5b50\u90ae\u4ef6\uff1f</p><input type="checkbox" id="devsite-thumb-create-profile-email-opt-in"><label for="devsite-thumb-create-profile-email-opt-in">\u5f53\u7136\u4e50\u610f\uff01</label><p class="account-note">',
b='\u521b\u5efa\u5f00\u53d1\u8005\u8d44\u6599\u5373\u8868\u793a\u60a8\u540c\u610f\u9075\u5b88<a href="'+(_ds.X(_ds.Z(b))+'">\u5185\u5bb9\u653f\u7b56</a>\u3002\u60a8\u4f7f\u7528\u6b64\u670d\u52a1\u65f6\u987b\u9075\u5b88 Google \u7684<a href="https://policies.google.com/terms">\u670d\u52a1\u6761\u6b3e</a>\u548c<a href="https://policies.google.com/privacy">\u9690\u79c1\u6743\u653f\u7b56</a>\u3002\u60a8\u7684 Google \u5e10\u53f7\u4e2d\u7684\u540d\u79f0\u4ee5\u53ca\u60a8\u9009\u62e9\u7684\u5174\u8da3\u5c06\u7528\u5728\u60a8\u7684 Google \u5f00\u53d1\u8005\u8d44\u6599\u4e2d\u3002\u60a8\u7684\u59d3\u540d\u53ef\u4ee5\u51fa\u73b0\u5728\u60a8\u53c2\u4e0e\u8d21\u732e\u7684\u4efb\u4f55\u5730\u65b9\uff0c\u5e76\u968f\u65f6\u53ef\u4ee5\u66f4\u6539\u3002'),
c+=b):c+='<p class="not-eligible-prompt">\u6b64\u5e10\u53f7\u4e0d\u7b26\u5408\u6761\u4ef6\uff0c\u65e0\u6cd5\u521b\u5efa\u5f00\u53d1\u8005\u8d44\u6599\u3002<a href="https://developers.google.com/profile/help#i%E2%80%99m_unable_to_create_a_profile_with_my_g_suite_account_why_is_that" target="_blank">\u4e86\u89e3\u8be6\u60c5</a>';c+='</p></div><div class="devsite-dialog-buttons">';c=(a?c+'<button class="button-primary create-profile">\u521b\u5efa\u4e2a\u4eba\u8d44\u6599':c+'<button class="button button-primary change-account-button">\u66f4\u6539\u5e10\u53f7')+
'</button><button class="button devsite-dialog-close">\u5173\u95ed';return(0,_ds.R)(c+"</button></div></devsite-dialog>")},mga=function(a){a='<devsite-dialog class="devsite-thumb-rating-dialog" id="devsite-thumb-error-dialog"><div class="devsite-dialog-contents"><h3 class="no-link">\u51fa\u4e86\u70b9\u95ee\u9898</h3><p>'+(_ds.S(a.error)+'</p></div><div class="devsite-dialog-buttons"><button class="button devsite-dialog-close">');return(0,_ds.R)(a+"\u5173\u95ed</button></div></devsite-dialog>")};var nga=async function(a){var b=new _ds.bk(_ds.E().href);if(_ds.uk(b.g,"thumb")){var c=b.g.get("thumb");if("up"===c||"down"===c)a.setAttribute("rating",c),await r8(a);b.g.remove("thumb");_ds.Bk(b.toString(),!0,!1)}else{var d=await a.Ca();if(null!=d&&d.profileId){b=_ds.E().href;try{b=await _ds.Tp(b)}catch(f){}d=(null==d?void 0:d.profileId)||"";var e=new _ds.ur;try{c=await e.getPath({path:b,profileId:d}),"THUMBS_UP"===(null==c?void 0:c.ratingStatus)&&a.setAttribute("rating","up"),"THUMBS_DOWN"===(null==
c?void 0:c.ratingStatus)&&a.setAttribute("rating","down")}catch(f){}}}},s8=function(a){let b="thumb-down-outline",c="thumb-up-outline";"down"===a.rating?b="thumb-down-filled":"up"===a.rating&&(c="thumb-up-filled");const d=a.getAttribute("position")||"";_ds.N(a,hga,{position:d,Yx:{Vl:"devsite-thumb-down",label:"\u6ca1\u6709\u5e2e\u52a9",type:b},Zx:{Vl:"devsite-thumb-up",label:"\u6709\u5e2e\u52a9",type:c}})},pga=function(a){a.eventHandler.listen(a,"click",b=>{oga(a,b)})},oga=async function(a,b){b=b.target;
if(null==b?0:b.classList.contains("devsite-thumb-up")){if("up"===a.rating)a.removeAttribute("rating"),t8(a,"\u9875\u9762\u8bc4\u5206\u5df2\u79fb\u9664\u3002");else{a.setAttribute("rating","up");if(0<a.qa.length)a.ea=u8(a,a.qa,"devsite-thumb-up-dialog"),a.ea.setAttribute("open","");else{let c;null==(c=a.mc)||c.setAttribute("rating-type","thumbsUp");a.o=await v8(a);a.o.setAttribute("open","")}t8(a,"\u5df2\u5c06\u9875\u9762\u8bc4\u4e3a\u6709\u5e2e\u52a9\u3002");await w8(a)}await r8(a)}else if(null==
b?0:b.classList.contains("devsite-thumb-down")){if("down"===a.rating)a.removeAttribute("rating"),t8(a,"\u9875\u9762\u8bc4\u5206\u5df2\u79fb\u9664\u3002");else{a.setAttribute("rating","down");if(0<a.ma.length)a.v=u8(a,a.ma,"devsite-thumb-down-dialog"),a.v.setAttribute("open","");else{let c;null==(c=a.mc)||c.setAttribute("rating-type","thumbsDown");a.o=await v8(a);a.o.setAttribute("open","")}t8(a,"\u5df2\u5c06\u9875\u9762\u8bc4\u4e3a\u6ca1\u6709\u5e2e\u52a9\u3002");await w8(a)}await r8(a)}},t8=function(a,
b){a.dispatchEvent(new CustomEvent("devsite-show-custom-snackbar-msg",{detail:{msg:b,showClose:!1},bubbles:!0}))},u8=function(a,b,c){let d=document.body.querySelector(`#${c}`);if(d)return d;d=_ds.O(iga,{jm:c,Md:b});document.body.appendChild(d);a.eventHandler.listen(d,"change",()=>{if("down"===a.rating){let e,f;null==(e=a.v)||null==(f=e.querySelector(".devsite-thumb-rating-submit"))||f.removeAttribute("disabled")}else if("up"===a.rating){let e,f;null==(e=a.ea)||null==(f=e.querySelector(".devsite-thumb-rating-submit"))||
f.removeAttribute("disabled")}});a.eventHandler.listen(d.querySelector(".devsite-thumb-rating-submit"),"click",async()=>{await qga(a)});return d},v8=async function(a){let b=document.body.querySelector("#devsite-thumb-thank-you-dialog");if(b)return b;const c=await _ds.v();var d=await c.isSignedIn(),e=d;d&&(e=await a.Ca(),e=x8()&&!e);e&&y8(a,"Callout Profile intro");b=_ds.O(jga,{isSignedIn:d,xu:e});document.body.appendChild(b);const f=b.querySelector(".devsite-dialog-buttons");a.mc&&(null==f||f.appendChild(a.mc),
a.eventHandler.listen(a.mc.querySelector("button"),"click",()=>{let g;null==(g=b)||g.removeAttribute("open")}));e&&f&&a.eventHandler.listen(f.querySelector(".create-profile"),"click",async()=>{let g;null==(g=b)||g.removeAttribute("open");a.g=await rga(a);a.g.setAttribute("open","")});!d&&f&&(d=b.querySelector(".sign-in-button"))&&a.eventHandler.listen(d,"click",async g=>{g.preventDefault();g.stopPropagation();g=new _ds.bk(_ds.E().href);g.g.add("thumb",a.rating);_ds.Bk(g.toString(),!0,!1);await c.signIn()});
return b},w8=async function(a){let b=null;"down"===a.rating?b={category:"Site-Wide Custom Events",action:"devsite-rating thumb",label:"Thumb Down Rating",value:-1}:"up"===a.rating&&(b={category:"Site-Wide Custom Events",action:"devsite-rating thumb",label:"Thumb Up Rating",value:1});a.dispatchEvent(new CustomEvent("devsite-analytics-observation",{detail:b,bubbles:!0}))},r8=async function(a){let b="RATING_STATE_UNKNOWN";"down"===a.rating?b="THUMBS_DOWN":"up"===a.rating&&(b="THUMBS_UP");var c=await a.Ca();
if(null!=c&&c.profileId){var d=_ds.E().href;try{d=await _ds.Tp(d)}catch(f){}var e=new _ds.ur;try{await e.jk({path:d,status:b,profileId:null==c?void 0:c.profileId})}catch(f){let g;null==(g=a.g)||g.removeAttribute("open");a.h=z8(a,"\u4fdd\u5b58\u6b64\u9875\u9762\u8bc4\u5206\u65f6\u51fa\u73b0\u95ee\u9898\u3002");a.h.setAttribute("open","");return}a.rating&&(a=document.querySelector("devsite-user#devsite-user"),c=await _ds.Np("/saved-pages",null==c?void 0:c.profileId,null==c?void 0:c.vanityId,!1,!0),
await (null==a?void 0:a.showPopout("view-rated-pages",c)))}},qga=async function(a){if("down"===a.rating){var b;let d;var c=(null==(b=a.v)?void 0:null==(d=b.querySelector("input[type=radio]:checked"))?void 0:d.id)||"";A8(a,c);let e;null==(e=a.mc)||e.setAttribute("rating-type","thumbsDown");let f;null==(f=a.mc)||f.setAttribute("rating-category",c);let g;null==(g=a.v)||g.removeAttribute("open")}else if("up"===a.rating){let d;b=(null==(c=a.ea)?void 0:null==(d=c.querySelector("input[type=radio]:checked"))?
void 0:d.id)||"";A8(a,b);let e;null==(e=a.mc)||e.setAttribute("rating-type","thumbsUp");let f;null==(f=a.mc)||f.setAttribute("rating-category",b);let g;null==(g=a.ea)||g.removeAttribute("open")}a.o=await v8(a);a.o.setAttribute("open","")},y8=function(a,b,c){let d=null;"down"===a.rating?d={category:"Site-Wide Custom Events",action:b,label:"Rating Widget Callout",value:-1}:"up"===a.rating&&(d={category:"Site-Wide Custom Events",action:b,label:"Rating Widget Callout",value:1});b=Object.assign({},{La:"Site-Wide Custom Events",
action:b},d,c||{});a.dispatchEvent(new CustomEvent("devsite-analytics-observation",{detail:b,bubbles:!0}))},rga=async function(a){var b=await a.Kb();y8(a,"Callout Profile displayed");var c=document.body.querySelector("#devsite-thumb-create-profile-dialog");if(c)return c;c=(await _ds.Lp()).href;c=_ds.O(lga,{Tb:c,Kb:b});document.body.appendChild(c);if(b=c.querySelector(".devsite-dialog-buttons")){var d=b.querySelector(".create-profile");d&&a.eventHandler.listen(d,"click",()=>{a.createProfile()});(d=
b.querySelector(".change-account-button"))&&a.eventHandler.listen(d,"click",async e=>{e.preventDefault();e.stopPropagation();e=new _ds.bk(_ds.E().href);e.g.add("thumb",a.rating);_ds.Bk(e.toString(),!0,!1);await (await _ds.v()).changeAccount()});a.eventHandler.listen(b.querySelector(".devsite-dialog-close"),"click",()=>{y8(a,"Callout Profile dismissed")})}return c},x8=function(){const a=document.querySelector("devsite-user#devsite-user");return null!=a&&a.hasAttribute("enable-profiles")},z8=function(a,
b){y8(a,"Callout Profile error",{label:"Rating Widget Callout Error",value:b});if(a=document.body.querySelector("#devsite-thumb-error-dialog"))return a;a=_ds.O(mga,{error:b});document.body.appendChild(a);return a},A8=function(a,b){let c=null;"down"===a.rating?c={category:"Site-Wide Custom Events",action:"devsite-rating category",label:`Rating Category: ${b}`,value:-1}:"up"===a.rating&&(c={category:"Site-Wide Custom Events",action:"devsite-rating category",label:`Rating Category: ${b}`,value:1});a.dispatchEvent(new CustomEvent("devsite-analytics-observation",
{detail:c,bubbles:!0}))},sga=class extends _ds.D{constructor(){super(["devsite-snackbar","devsite-dialog","devsite-feedback"]);this.eventHandler=new _ds.F;this.o=this.h=this.g=this.mc=null;this.ma=[];this.v=null;this.qa=[];this.ea=null;this.rating=""}static get observedAttributes(){return["rating"]}async connectedCallback(){var a=document.querySelector(".devsite-thumb-rating-feedback");if(a){var b;if(this.mc=null==(b=a.content.firstElementChild)?void 0:b.cloneNode(!0))a=this.mc.querySelector("button"),
null==a||a.classList.add("button-with-icon"),a&&a.firstChild&&(b=_ds.O(kga),a.insertBefore(b,a.firstChild))}if((a=document.querySelector(".devsite-thumb-rating-down-categories"))&&a.content)try{this.ma=JSON.parse(a.content.textContent||"")}catch(c){this.ma=[]}if((a=document.querySelector(".devsite-thumb-rating-up-categories"))&&a.content)try{this.qa=JSON.parse(a.content.textContent||"")}catch(c){this.qa=[]}await nga(this);s8(this);pga(this)}disconnectedCallback(){_ds.H(this.eventHandler);_ds.uj(this.v);
_ds.uj(this.ea);_ds.uj(this.o);_ds.uj(this.g);_ds.uj(this.h)}attributeChangedCallback(a,b,c){switch(a){case "rating":this.rating=c||"",s8(this)}}async Kb(){if(!await (await _ds.v()).isSignedIn())return!1;const a=new _ds.JA;let b=null;try{b=await a.Db()}catch(e){}let c,d;return"ELIGIBILITY_ELIGIBLE"===(null==(c=b)?void 0:null==(d=c.createProfile)?void 0:d.status)}async Ca(){if(!x8()||!await (await _ds.v()).isSignedIn()||!await this.Kb())return null;const a=new _ds.YA;let b=null;try{b=await a.Ca()}catch(c){}return b}async createProfile(){const a=
await _ds.BJ.getName();if(a){var b,c=null==(b=this.g)?void 0:b.querySelector("#devsite-thumb-create-profile-email-opt-in");b=!(!c||!c.checked);var d;null==(d=this.g)||d.classList.add("loading");d=new _ds.YA;try{await _ds.WA(d,a,b,!0);y8(this,"Callout Profile created");let f;null==(f=this.g)||f.removeAttribute("open");await r8(this)}catch(f){let g;null==(g=this.g)||g.removeAttribute("open");this.h=z8(this,`${f}`);this.h.setAttribute("open","")}var e;null==(e=this.g)||e.classList.remove("loading")}else null==
(c=this.g)||c.removeAttribute("open"),this.h=z8(this,"\u83b7\u53d6\u5e10\u53f7\u4fe1\u606f\u65f6\u51fa\u73b0\u95ee\u9898\u3002"),this.h.setAttribute("open","")}};try{window.customElements.define("devsite-thumb-rating",sga)}catch(a){console.warn("Unrecognized DevSite custom element - DevsiteThumbRating",a)};})(_ds_www);
