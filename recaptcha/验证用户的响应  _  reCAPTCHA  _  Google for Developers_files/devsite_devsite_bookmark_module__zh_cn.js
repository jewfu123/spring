(function(_ds){var window=this;var uZ=function(a){let b='<devsite-dropdown-list ellipsis checkboxes fetchingitems="true"';a.Kv&&(b=b+' writable addItemText="'+_ds.AH("\u65b0\u96c6\u5408"),b+='"');return(0,_ds.R)(b+'><span class="material-icons bookmark-icon" slot="toggle">bookmark_border</span></devsite-dropdown-list>')},vZ=function(a){const b=a.isSignedIn;a=a.Kb;let c='<devsite-dialog class="devsite-bookmark-dialog" id="devsite-bookmark-dialog"><div class="devsite-dialog-contents">';a&&(c+='<h3 class="no-link">',c=(b?c+"\u521b\u5efa Google \u5f00\u53d1\u8005\u8d44\u6599\u4ee5\u6dfb\u52a0\u4e66\u7b7e":
c+"\u767b\u5f55\u540e\u65b9\u53ef\u6dfb\u52a0\u4e66\u7b7e")+"</h3>");c+="<p>";c=(b?a?c+"\u4f7f\u7528 Google \u5f00\u53d1\u8005\u8d44\u6599\u4fdd\u5b58\u60a8\u7ecf\u5e38\u8bbf\u95ee\u7684\u9875\u9762\u3002":c+'\u6b64\u5e10\u53f7\u4e0d\u7b26\u5408\u6761\u4ef6\uff0c\u65e0\u6cd5\u521b\u5efa\u5f00\u53d1\u8005\u8d44\u6599\u3002<a href="https://developers.google.com/profile/help#i%E2%80%99m_unable_to_create_a_profile_with_my_g_suite_account_why_is_that" target="_blank">\u4e86\u89e3\u8be6\u60c5</a>':c+"\u767b\u5f55\u540e\u65b9\u53ef\u5c06\u7ecf\u5e38\u8bbf\u95ee\u7684\u9875\u9762\u4fdd\u5b58\u81f3 Google \u5f00\u53d1\u8005\u8d44\u6599\u3002")+
"</p>";b&&a&&(c+="<p>\u521b\u5efa\u60a8\u7684 Google \u5f00\u53d1\u8005\u8d44\u6599\u3002",c+="</p>");c+='</div><div class="devsite-dialog-buttons">';c=(b?a?c+'<button class="button-primary create-profile">\u521b\u5efa\u4e2a\u4eba\u8d44\u6599':c+'<button class="button-primary change-account">\u66f4\u6539\u5e10\u53f7':c+'<button class="button button-primary sign-in-button">\u767b\u5f55')+'</button><button class="button devsite-dialog-close">\u5173\u95ed';return(0,_ds.R)(c+"</button></div></devsite-dialog>")},
wZ=function(a){a='<devsite-dialog class="devsite-bookmark-dialog" id="devsite-bookmark-error-dialog"><div class="devsite-dialog-contents"><h3 class="no-link">\u51fa\u4e86\u70b9\u95ee\u9898</h3><p>'+(_ds.S(a.error)+'</p></div><div class="devsite-dialog-buttons"><button class="button devsite-dialog-close">');return(0,_ds.R)(a+"\u5173\u95ed</button></div></devsite-dialog>")},xZ=function(){return(0,_ds.R)('<devsite-dialog class="devsite-bookmark-dialog devsite-receive-updates-dialog" id="devsite-receive-updates-dialog"><div class="devsite-dialog-contents"><h3 class="no-link">\u63a5\u6536\u7248\u672c\u8bf4\u660e\u7535\u5b50\u90ae\u4ef6\uff1f</h3><p>\u60a8\u662f\u5426\u613f\u610f\u53ca\u65f6\u4e86\u89e3\u76f8\u5173\u4fe1\u606f\uff0c\u9488\u5bf9\u60a8\u5df2\u4fdd\u5b58\u5230\u5546\u5bb6\u8d44\u6599\u7684\u7b26\u5408\u6761\u4ef6\u7684\u4ea7\u54c1\uff0c\u901a\u8fc7\u7535\u5b50\u90ae\u4ef6\u63a5\u6536\u6709\u5173\u7248\u672c\u8bf4\u660e\u7684\u52a8\u6001\uff1f <a href="https://developers.google.com/profile/help#what_is_a_release_note" target="_blank">\u4e86\u89e3\u8be6\u60c5</a></p></div><div class="devsite-dialog-buttons"><button class="button-primary" id="confirm-receive-updates">\u540c\u610f</button><button class="button devsite-dialog-close">\u53d6\u6d88</button></div></devsite-dialog>')};var yZ=function(a){const b=document.body.querySelector(".devsite-page-title,.devsite-playlist-title,.devsite-quiz-title,[layout=docs] .devsite-article h1:first-of-type");let c;const d=null==(c=a.parentElement)?void 0:c.matches("devsite-feature-tooltip");if(!b){if(d){let e;null==(e=a.parentElement)||e.remove()}else a.remove();return!0}if(d){let e;if((null==(e=a.parentElement)?void 0:e.previousElementSibling)!==b){let f;null==(f=b.parentElement)||f.insertBefore(a.parentElement,b.nextSibling);return!0}}else if(a.previousElementSibling!==
b){let e;null==(e=b.parentElement)||e.insertBefore(a,b.nextSibling);return!0}return!1},zZ=async function(a){if(!a.oa){a.ma=document.body.querySelector(".devsite-article");let c;null==(c=a.ma)||c.setAttribute("has-bookmark","")}a.classList.add("show");let b;(null==(b=a.parentElement)?0:b.matches("devsite-feature-tooltip"))&&a.parentElement.classList.add("inline-block");_ds.N(a,uZ,{Kv:!a.path});a.g=a.querySelector("devsite-dropdown-list");a.g&&(a.g.addItemDisabledTooltipText=_ds.xL)},FZ=async function(a){a.eventHandler.listen(a,
"DropdownToggled",b=>{let c;(null==(c=b.Ia)?void 0:c.detail).open&&AZ(a)});a.eventHandler.listen(a,"DropdownAddItem",b=>{a.vn(b)});a.eventHandler.listen(a,"DropdownItemToggled",b=>{BZ(a,b)});a.eventHandler.listen(document.querySelector("devsite-collection-list")||document.body,["devsite-collection-created","devsite-collection-deleted"],b=>{b=b.Ia;if("devsite-collection-created"===b.type){b=b.detail;b=CZ(a,{description:b.description,isEmailAlertsEnabled:b.isEmailAlertsEnabled,name:b.name,title:b.title});
let c;null==(c=a.g)||c.listItems.splice(1,0,b);DZ(a)}else a.g&&EZ(a,b.detail)})},IZ=async function(a){var b=new URL(_ds.E().href);if(b.searchParams.get("bookmark")){var c=await _ds.bL(_ds.cL);c&&await GZ(a,`profiles/${c}/collections/default`,!0);b.searchParams.delete("bookmark");_ds.Bk(b.toString(),!0,!1)}if(await (await _ds.v()).isSignedIn()&&(c=await a.Ca(),null!=c&&c.profileId)){b=a.path||"";if(!b)try{b=await _ds.Tp(_ds.E().href)}catch(e){}c=(null==c?void 0:c.profileId)||"";var d=new _ds.ur;try{const e=
await d.getPath({path:b,profileId:c});if(null==e?0:e.collections)a.h=new Set([...e.collections,...a.h]);"SAVED"===(null==e?void 0:e.saveStatus)&&a.setAttribute("saved","")}catch(e){}await HZ(a)}},JZ=async function(a){let b;const c=null==(b=a.g)?void 0:b.querySelector(".bookmark-icon");c&&(0<a.h.size?(c.innerText="bookmark",c.classList.add("toggled")):(c.innerText="bookmark_border",c.classList.remove("toggled")))},AZ=async function(a){var b=await (await _ds.v()).isSignedIn();let c=!0;b&&(c=await a.Kb());
if(!c||!await a.Ca()){b&&c&&KZ(a,"Callout Profile intro");var d=document.body.querySelector("#devsite-bookmark-dialog");d||(d=_ds.O(vZ,{isSignedIn:b,Kb:c}),document.body.appendChild(d),(b=d.querySelector(".create-profile"))&&a.eventHandler.listen(b,"click",async()=>{var e;null==(e=d)||e.removeAttribute("open");e=null;try{e=await _ds.YK()}catch(f){}e&&e.profileId&&(await _ds.cL.Ca(!0),await GZ(a,`profiles/${e.profileId}/collections/default`,!0),await a.reset())}),(b=d.querySelector(".sign-in-button"))&&
a.eventHandler.listen(b,"click",async e=>{e.preventDefault();e.stopPropagation();e=new _ds.bk(_ds.E().href);e.g.add("bookmark",!0);_ds.Bk(e.toString(),!0,!1);await (await _ds.v()).signIn()}),(b=d.querySelector(".change-account"))&&a.eventHandler.listen(b,"click",async e=>{e.preventDefault();e.stopPropagation();e=new _ds.bk(_ds.E().href);e.g.add("bookmark",!0);_ds.Bk(e.toString(),!0,!1);await (await _ds.v()).changeAccount()}),(b=d.querySelector(".devsite-dialog-close"))&&a.eventHandler.listen(b,"click",
()=>{a.toggleAttribute("saved");KZ(a,"Callout Profile dismissed")}));a.qa=d;d.setAttribute("open","");a.g&&(a.g.displayPopout=!1)}},BZ=async function(a,b){let c;b=null==(c=b.Ia)?void 0:c.detail;await GZ(a,(null==b?void 0:b.value)||"",b.checked)},EZ=function(a,b){a.g&&(a.g.listItems=a.g.listItems.filter(c=>c.id!==b.name),a.h.delete(b.name),DZ(a))},LZ=function(a,b){a.dispatchEvent(new CustomEvent("devsite-show-custom-snackbar-msg",{detail:{msg:b,linkText:void 0,href:void 0,showClose:!1},bubbles:!0,
composed:!0}))},KZ=function(a,b,c){b=Object.assign({},{category:"Site-Wide Custom Events",action:b,label:"Saving Widget Callout"},c||{});a.dispatchEvent(new CustomEvent("devsite-analytics-observation",{detail:b,bubbles:!0}))},GZ=async function(a,b,c){var d=await a.Ca();if(d){c?a.h.add(b):a.h.delete(b);await JZ(a);var e=a.o;a.o=0<a.h.size;e!==a.o&&a.Ga({category:"Site-Wide Custom Events",action:a.o?"Saving Page to Profile":"Removing Saved Page from Profile",label:"Saving Widget"});d=await MZ(a,d);
a.Ga({category:"Site-Wide Custom Events",action:c?"Saving Page to Collection":"Removing Saved Page from Collection",label:"Saving Widget"});(await _ds.v()).hasMendelFlagAccess("Profiles","enable_release_notes_notifications")&&"SAVED"===(null==d?void 0:d.saveStatus)&&await NZ(a)&&(a.v=await OZ(a),a.v.setAttribute("open",""));var f;if(d=null==(f=a.g)?void 0:f.listItems.find(g=>g.id===b))d.checked=c;if(c){let g;await (null==(g=document.querySelector("#devsite-view-saved-pages"))?void 0:g.showPopout())}a.dispatchEvent(new CustomEvent(c?
"devsite-bookmarked-path":"devsite-unbookmarked-path",{bubbles:!0,composed:!0,detail:{collectionName:b}}))}},OZ=async function(a){let b=document.body.querySelector("#devsite-receive-updates-dialog");b||(b=_ds.O(xZ),document.body.appendChild(b));const c=new _ds.YA,d=await _ds.Tp(_ds.E().href);var e=b.querySelector("#confirm-receive-updates");e&&a.eventHandler.listen(e,"click",async()=>{const f={pageUpdateEmailPreference:!0};try{await c.hc({profile:f});let g;null==(g=a.v)||g.removeAttribute("open");
a.Ga({category:"Site-Wide Custom Events",action:"Developer Profile Release Note email: accepted",label:`${d}`})}catch(g){}});(e=b.querySelector(".devsite-receive-updates-dialog .devsite-dialog-buttons .devsite-dialog-close"))&&a.eventHandler.listen(e,"click",()=>{a.Ga({category:"Site-Wide Custom Events",action:"Developer Profile Release Note email: dismissed",label:`${d}`})});try{const f=await a.Ca();let g;await _ds.UA(c,null!=(g=null==f?void 0:f.profileId)?g:"","AckPageUpdateFeaturePopupSeen",Date.now())}catch(f){}return b},
MZ=async function(a,b){if(null==b||!b.profileId)return null;let c;c=0<a.h.size?"SAVED":"UNSAVED";let d=a.path||"";if(!d)try{d=await _ds.Tp(_ds.E().href)}catch(h){}const e=new _ds.ur;let f=null;const g=[];g.push(...a.h);try{f=await e.Th({path:d,status:c,profileId:b.profileId,collections:g})}catch(h){KZ(a,"Callout Profile error",{label:"Saving Widget Callout Error"}),b=document.body.querySelector("#devsite-bookmark-error-dialog"),b||(b=_ds.O(wZ,{error:"\u4fdd\u5b58\u6b64\u9875\u9762\u65f6\u51fa\u73b0\u95ee\u9898\u3002"}),
document.body.appendChild(b)),a.ea=b,a.ea.setAttribute("open",""),a.toggleAttribute("saved")}return f},HZ=async function(a){if(a.g){a.g.fetchingItems=!0;var b=await _ds.dL();a.g.fetchingItems=!1;b&&(b=b.map(c=>CZ(a,c)),b.sort((c,d)=>{let e;if(null==(e=c.id)?0:e.endsWith("default"))return-1;let f;return(null==(f=d.id)?0:f.endsWith("default"))?1:c.updatedDate>d.updatedDate?-1:1}),a.g.listItems=b,DZ(a))}},CZ=function(a,b){let c,d,e;return{id:null!=(c=b.name)?c:"",title:null!=(d=b.title)?d:"",updatedDate:null!=
(e=b.updateTime)?e:"",checked:!(!b.name||!a.h.has(b.name))}},DZ=function(a){a.g&&(a.g.addItemDisabled=20<=a.g.listItems.length)},NZ=async function(a){a=await a.Ca();let b;const c=await _ds.TA(new _ds.YA,null!=(b=null==a?void 0:a.profileId)?b:"",["AckPageUpdateFeaturePopupSeen"]);let d,e;return(new Date(null!=(d=null==c?void 0:c.AckPageUpdateFeaturePopupSeen)?d:0)).getTime()+5184E6<Date.now()&&!!(null==a?0:null==(e=a.pendingFields)?0:e.includes("profile.page_update_email_preference"))},PZ=class extends _ds.D{constructor(){super(["devsite-snackbar",
"devsite-dialog","devsite-fast-track-profile-creator"]);this.eventHandler=new _ds.F;this.v=this.ea=this.qa=this.ma=null;this.o=!1;this.g=null;this.h=new Set;this.path=null;this.oa=!1}static get observedAttributes(){return["saved","is-inline-bookmark"]}async connectedCallback(){if(this.getAttribute("path"))this.path=this.getAttribute("path");else if(yZ(this))return;await zZ(this);await FZ(this);await IZ(this);await JZ(this)}disconnectedCallback(){_ds.H(this.eventHandler);_ds.uj(this.qa);_ds.uj(this.ea);
_ds.uj(this.v);let a;null==(a=this.ma)||a.removeAttribute("has-bookmark")}async reset(){this.innerHTML="";this.disconnectedCallback();await this.connectedCallback()}attributeChangedCallback(a,b,c){"saved"===a?(this.o=null!==c,JZ(this)):"is-inline-bookmark"===a&&(this.oa=null!==c)}async Kb(){if(!await (await _ds.v()).isSignedIn())return!1;const a=new _ds.JA;let b=null;try{b=await a.Db()}catch(e){}let c,d;return"ELIGIBILITY_ELIGIBLE"===(null==(c=b)?void 0:null==(d=c.createProfile)?void 0:d.status)}async Ca(){if(!await this.Kb())return null;
const a=new _ds.YA;let b=null;try{b=await a.Ca()}catch(c){}return b}async vn(a){var b;a={title:(null==(b=a.Ia)?void 0:b.detail).title,isEmailAlertsEnabled:!1};this.g&&(this.g.fetchingItems=!0);try{var c=await _ds.fL(a)}catch(f){}this.g&&(this.g.fetchingItems=!1);if(c){b=(new _ds.JB("\u5df2\u521b\u5efa\u96c6\u5408\u201c{COLLECTION_TITLE}\u201d\u3002")).format({COLLECTION_TITLE:c.title});LZ(this,b);this.Ga({La:"profile: saved pages",action:"collection created",label:window.location.href});c=CZ(this,
c);var d;null==(d=this.g)||d.listItems.push(c);var e;null==(e=this.g)||_ds.$z(e);DZ(this)}else LZ(this,"\u51fa\u9519\u4e86\uff0c\u672a\u80fd\u521b\u5efa\u96c6\u5408\u3002")}};try{window.customElements.define("devsite-bookmark",PZ)}catch(a){console.warn("Unrecognized DevSite custom element - DevsiteBookmark",a)};})(_ds_www);
